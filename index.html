<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Archie Butler · Interactive CV (v5)</title>
<meta name="description" content="Interactive CV with polished animations, aurora easter egg, and accessibility-friendly effects.">
<script>document.documentElement.classList.add('js');</script>
<style>
  :root{
    --bg:#0b0e14;
    --bg-soft:#0f1320;
    --ink:#e8ecf1;
    --muted:#9aa4b2;
    --brand:#7dd3fc;
    --brand-2:#60a5fa;
    --accent:#a78bfa;
    --card:#0f172a;
    --glow:rgba(96,165,250,.40);
    --shadow:0 30px 80px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.04);
    --section-1:#0b0e14;
    --section-2:#0d1020;
    --section-3:#101325;
  }
  [data-theme="light"]{
    --bg:#fbfbfd;
    --bg-soft:#f5f7fb;
    --ink:#0f1220;
    --muted:#5b6475;
    --brand:#0ea5e9;
    --brand-2:#2563eb;
    --accent:#7c3aed;
    --card:#ffffff;
    --glow:rgba(14,165,233,.25);
    --shadow:0 25px 60px rgba(2,6,23,.12), inset 0 1px 0 rgba(255,255,255,.6);
    --section-1:#fbfbfd;
    --section-2:#f2f5ff;
    --section-3:#eef7ff;
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);
    font:15px/1.6 ui-sans-serif,-apple-system,system-ui,"Segoe UI",Roboto,"Helvetica Neue",Arial}
  a{color:var(--brand-2);text-decoration:none}
  a:hover{text-decoration:underline}
  /* Auth overlay */
  .auth{position:fixed;inset:0;display:grid;place-items:center;
    background:radial-gradient(1000px 700px at 50% 60%, #0ea5e933, transparent 60%), var(--bg);
    z-index:100;transition:opacity .35s ease, visibility .35s ease}
  .auth.hide{opacity:0;visibility:hidden}
  .auth-card{background:var(--card);padding:24px;border-radius:16px;box-shadow:var(--shadow);
    border:1px solid rgba(255,255,255,.08);text-align:center;min-width:280px}
  .auth input{width:100%;padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.12);
    background:rgba(255,255,255,.06);color:var(--ink)}
  .auth button{margin-top:12px}
  .auth .hint{color:var(--muted);font-size:13px;margin-top:8px}
  /* Layout */
  .hero{position:relative;min-height:88vh;display:grid;place-items:center;overflow:hidden;background:var(--section-1)}
  .noise{position:fixed;inset:0;pointer-events:none;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="140" height="140" viewBox="0 0 140 140"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/><feColorMatrix type="saturate" values="0"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity=".025"/></svg>')}
  canvas#field{position:fixed;inset:0;z-index:0}
  /* NEW: pixel‑accurate glow that sticks to the cursor */
  .glow-dot{position:fixed;left:0;top:0;width:720px;height:720px;transform:translate(-9999px,-9999px);
    border-radius:50%;pointer-events:none;mix-blend-mode:screen;z-index:0;
    background:radial-gradient(circle at center, var(--glow) 0%, rgba(96,165,250,.25) 25%, rgba(96,165,250,.12) 45%, transparent 70%);
    filter:blur(66px)}
  .hero-inner{position:relative;z-index:2;display:grid;gap:18px;text-align:center;backdrop-filter:blur(4px)}
  .badge{display:inline-grid;place-items:center;width:84px;height:84px;border-radius:22px;
    background:linear-gradient(135deg,var(--brand),var(--accent));color:white;font-weight:900;font-size:28px;
    box-shadow:0 20px 50px rgba(0,0,0,.35);cursor:pointer}
  h1{margin:8px 0 0 0;font:900 56px/1.05 ui-sans-serif, system-ui, -apple-system;letter-spacing:-.02em}
  .tagline{font-size:18px;color:var(--muted)}
  .cta{margin-top:18px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
  .btn{padding:12px 18px;border-radius:12px;border:1px solid rgba(255,255,255,.12);
    background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.06));color:var(--ink);
    box-shadow:var(--shadow);cursor:pointer;transition:transform .15s ease, box-shadow .15s ease}
  .btn:hover{transform:translateY(-2px)}
  .btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:white;border:none}
  .btn.ghost{background:transparent}
  .pill{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:999px;
    background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);cursor:pointer;
    font-weight:700;color:var(--ink)}
  .pill:hover{transform:translateY(-1px)}
  .theme{position:fixed;top:16px;right:16px;z-index:4}
  .nav{position:sticky;top:0;z-index:3;background:linear-gradient(180deg,var(--bg-soft),rgba(0,0,0,0));backdrop-filter:blur(8px)}
  .nav-inner{max-width:1100px;margin:auto;display:flex;gap:18px;align-items:center;justify-content:space-between;padding:12px 18px}
  .nav a{color:var(--ink);opacity:.9}
  main{max-width:1100px;margin:-60px auto 120px auto;padding:0 18px;position:relative;z-index:2}
  .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:20px}
  .card{grid-column:span 12;background:var(--card);border-radius:20px;padding:22px 22px 18px 22px;
    box-shadow:var(--shadow);border:1px solid rgba(255,255,255,.06);transform-style:preserve-3d;perspective:800px;
    transition:transform .2s ease, background .6s ease}
  .card:hover{transform:translateY(-4px)}
  h2{margin:0 0 12px 0;font:800 14px/1.2 ui-sans-serif, system-ui;letter-spacing:.16em;text-transform:uppercase}
  h3{margin:0 0 6px 0;font:700 18px/1.3 ui-sans-serif}
  .meta{color:var(--muted);font-size:13px}
  ul{margin:8px 0 0 18px}
  .split-8{grid-column:span 8}
  .split-4{grid-column:span 4}
  @media (max-width:920px){ .split-8,.split-4{grid-column:span 12} .hero{min-height:84vh} h1{font-size:42px}}
  /* Interactive skills */
  .skills{display:grid;grid-template-columns:repeat(2, minmax(0,1fr));gap:12px}
  .skill{padding:12px;border-radius:14px;border:1px solid rgba(255,255,255,.08);
    background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(0,0,0,.08));cursor:pointer;
    transition:transform .15s ease, box-shadow .15s ease}
  .skill:hover{transform:translateY(-2px)}
  .skill.active{box-shadow:0 12px 40px rgba(96,165,250,.25), inset 0 1px 0 rgba(255,255,255,.08)}
  .skill h4{margin:0 0 6px 0}
  .skill p{margin:0;color:var(--muted);font-size:14px;max-height:0;overflow:hidden;transition:max-height .4s ease}
  .skill.active p{max-height:160px}
  /* Timeline */
  .timeline{position:relative;padding-left:22px}
  .timeline:before{content:"";position:absolute;left:7px;top:6px;bottom:6px;width:2px;background:linear-gradient(var(--brand),transparent)}
  .dot{width:12px;height:12px;border-radius:50%;background:linear-gradient(135deg,var(--brand),var(--accent));box-shadow:0 0 0 4px rgba(125,211,252,.15)}
  .row{display:grid;grid-template-columns:20px 1fr;gap:12px;margin:16px 0}
  /* Reveal animations */
  .reveal{opacity:1;transform:none;filter:none}
  .js .reveal{opacity:0;transform:translateY(18px) scale(.98);filter:blur(4px)}
  .js .reveal.in{opacity:1;transform:none;filter:none}
  /* Cursor */
  .cursor{position:fixed;top:0;left:0;width:28px;height:28px;border-radius:50%;pointer-events:none;z-index:5;
    border:2px solid rgba(255,255,255,.6);mix-blend-mode:difference;transition:width .15s ease,height .15s ease, border-color .15s ease, transform .02s linear}
  .cursor.big{width:64px;height:64px;border-color:rgba(255,255,255,.85)}
  /* Section transition bands */
  .band{height:120px;background:radial-gradient(600px 200px at 50% 50%, var(--glow), transparent 70%);filter:blur(40px);opacity:.6}
  /* Contact envelope — refined */
  .envelope{display:inline-block;position:relative;width:78px;height:54px;border-radius:10px;
    background:linear-gradient(#1f2937,#0f172a);border:1px solid rgba(255,255,255,.14);box-shadow:var(--shadow);cursor:pointer;overflow:hidden}
  .envelope .body{position:absolute;inset:0;border-radius:10px;background:linear-gradient(180deg,#0b1220,#111827)}
  .flap{position:absolute;left:0;right:0;top:0;height:52%;transform-origin:top;transition:transform .6s cubic-bezier(.2,.65,.2,1);
    background:linear-gradient(180deg,#263243,#0f172a);clip-path:polygon(0 0, 100% 0, 50% 100%)}
  .paper{position:absolute;left:10px;right:10px;bottom:10px;top:26px;background:white;border-radius:8px;
    transform:translateY(18px);transition:transform .6s cubic-bezier(.2,.65,.2,1); box-shadow:0 8px 18px rgba(0,0,0,.25)}
  .envelope.open .flap{transform:rotateX(180deg)}
  .envelope.open .paper{transform:translateY(-6px)}
  footer{padding:16px 32px 40px 32px;color:var(--muted);font-size:13px}
  /* Toast */
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:24px;background:rgba(17,24,39,.9);color:#e5e7eb;
    padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.1);box-shadow:var(--shadow);z-index:50;opacity:0;transition:opacity .3s ease}
  .toast.show{opacity:1}
  noscript{display:block;max-width:900px;margin:20px auto;padding:12px 14px;background:#fee2e2;color:#7f1d1d;border-radius:10px}
</style>
</head>
<body>
  <noscript>This page uses JavaScript for animations. Since JavaScript is disabled, you’ll see the static version.</noscript>

  <!-- Auth overlay -->
  <div class="auth" id="auth">
    <div class="auth-card">
      <h3>Enter password</h3>
      <input id="authInput" type="password" placeholder="Password" autocomplete="current-password">
      <button class="btn primary" id="authBtn">Unlock</button>
      <div class="hint">Hint: 1234 (demo only; not secure)</div>
    </div>
  </div>

  <button class="btn theme" id="themeBtn" title="Toggle theme">Toggle theme</button>

  <nav class="nav">
    <div class="nav-inner">
      <div style="display:flex;align-items:center;gap:10px">
        <div class="badge" id="badge">AB</div>
        <strong>Interactive CV</strong>
      </div>
      <div style="display:flex;gap:14px">
        <a href="#experience">Experience</a>
        <a href="#education">Education</a>
        <a href="#skillsBlock">Skills</a>
        <a href="#contact">Contact</a>
      </div>
    </div>
  </nav>

  <header class="hero" aria-label="Hero">
    <canvas id="field" aria-hidden="true"></canvas>
    <canvas id="aurora" style="position:fixed;inset:0;z-index:1;pointer-events:none;opacity:0;transition:opacity .6s ease" aria-hidden="true"></canvas>
    <div class="glow-dot" id="glowDot" aria-hidden="true"></div>
    <div class="noise" aria-hidden="true"></div>
    <div class="hero-inner reveal" style="z-index:2">
      <div class="badge" aria-hidden="true">AB</div>
      <h1>Archie Butler</h1>
      <div class="tagline">Gap‑year creator in luxury & arctic tourism · Lighting & video nerd · Friendly FOH pro</div>
      <div class="cta">
        <a class="btn primary" href="#experience">Dive in</a>
        <a class="btn ghost" href="mailto:archie_butler@icloud.com">Email me</a>
      </div>
    </div>
    <div class="cursor" id="cursor" aria-hidden="true"></div>
  </header>

  <div class="band"></div>

  <main>
    <section class="grid reveal" id="experience" style="background:var(--section-2);border-radius:22px;padding:14px">
      <div class="card split-8">
        <h2>Experience</h2>
        <div class="timeline">
          <div class="row">
            <div class="dot"></div>
            <div>
              <h3>Noteworthy — Full‑time Internship</h3>
              <div class="meta">June – October · London · noteworthy.co.uk</div>
              <ul>
                <li>Designed and supported bespoke luxury travel itineraries.</li>
                <li>Handled bookings and logistics; supported guides on client experiences.</li>
                <li>Contributed to website/content for trips and experiences.</li>
              </ul>
            </div>
          </div>
          <div class="row">
            <div class="dot"></div>
            <div>
              <h3>Wild About Lapland — Rovaniemi, Finland</h3>
              <div class="meta">November – April · Website & Itinerary Design · Client bookings</div>
              <ul>
                <li>Crafted winter experiences for guests in Finnish Lapland.</li>
                <li>Managed bookings and communications during the season.</li>
                <li>Designed and updated website content.</li>
              </ul>
            </div>
          </div>
          <div class="row">
            <div class="dot"></div>
            <div>
              <h3>The Swan, Wilton — Front of House</h3>
              <div class="meta">Jan 2024 – present · theswanwilton.com</div>
              <ul>
                <li>Bar service, orders and food running in a high‑volume village pub.</li>
                <li>Stock, cleanliness, and guest‑first service.</li>
              </ul>
            </div>
          </div>
          <details>
            <summary>More roles</summary>
            <div class="content">
              <p><strong>Lighting Lead — Theatre on the Hill, St John’s School</strong> (2021–present): Designed lighting for productions including <em>Les Misérables</em>, trained younger students, ran rehearsals & shows.</p>
              <p><strong>Burbage Christmas Tree Sale</strong> (2019–present): Card‑payment setup & training; helped deliver trees; event raises £20k+ annually.</p>
              <p><strong>Burbage Scout Hut — Cleaner</strong> (2022–2024): Weekly cleaning; supplies; key‑holder duties.</p>
            </div>
          </details>
        </div>
      </div>
      <div class="card split-4" id="skillsBlock">
        <h2>Skills</h2>
        <div class="skills" id="skills">
          <div class="skill"><h4>Itinerary design</h4><p>Luxury UK trips; Arctic winter experiences; supplier coordination.</p></div>
          <div class="skill"><h4>Bookings & ops</h4><p>Payments, confirmations, vendor comms, guest support.</p></div>
          <div class="skill"><h4>Website content</h4><p>Copy, images, page updates, simple HTML/CSS tweaks.</p></div>
          <div class="skill"><h4>Customer service</h4><p>FOH bar & tables; fast problem‑solving with a smile.</p></div>
          <div class="skill"><h4>Lighting design</h4><p>DMX scenes, cue stacks, rehearsals & show‑time ops.</p></div>
          <div class="skill"><h4>Drone videography</h4><p>Planning, safety, aerial footage, colour grading.</p></div>
        </div>
        <div style="margin-top:10px">
          <button class="pill" id="kitBtn" type="button" aria-expanded="false" aria-controls="kitPanel">Show technical kit</button>
          <div id="kitPanel" hidden class="content" style="margin-top:10px">
            Blackmagic ATEM, DaVinci Resolve, Premiere Pro, basic HTML/CSS/JS, macOS & Windows admin, card‑terminals, DMX lighting rigs.
          </div>
        </div>
      </div>
    </section>

    <div class="band"></div>

    <section class="grid reveal" id="education" style="background:var(--section-3);border-radius:22px;padding:14px">
      <div class="card split-8">
        <h2>Education</h2>
        <p><strong>A‑levels — completed</strong>: Economics, Computer Science, Physics; Extended Project Qualification (EPQ).</p>
        <p class="meta">Add final grades when ready.</p>
        <h2 style="margin-top:16px">Projects</h2>
        <ul>
          <li>Custom built PC and drone; Iceland volcano drone film (60k+ views).</li>
          <li>Lighting design for full‑school productions.</li>
        </ul>
      </div>
      <div class="card split-4">
        <h2>Interests</h2>
        <p>Photography, travel, technology and engineering. Frequent winter trips to Finnish Lapland: aurora photography, hiking, fire‑building, dog‑sledding, snowmobiling, snow‑shoeing and skiing.</p>
      </div>
    </section>

    <div class="band"></div>

    <section class="grid reveal" id="contact" style="margin-top:22px">
      <div class="card split-12" style="display:flex;align-items:center;gap:18px;justify-content:space-between">
        <div>
          <h2>Contact</h2>
          <p>Email: <a href="mailto:archie_butler@icloud.com">archie_butler@icloud.com</a> · Phone: 07419 588849 · Marlborough, UK</p>
        </div>
        <div class="envelope" id="env" title="Open message" aria-label="Open email">
          <div class="body"></div>
          <div class="flap"></div>
          <div class="paper"></div>
        </div>
      </div>
    </section>
  </main>

  <footer class="reveal">
    References available on request · CV last updated Aug 2025
  </footer>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

<script>
(function(){
  const $ = (id)=> document.getElementById(id);
  const safeLS = { get(k){ try{ return localStorage.getItem(k); }catch(e){ return null; } },
                   set(k,v){ try{ localStorage.setItem(k,v); }catch(e){ } } };
  // Toast
  const toastEl = $('toast'); let toastTO=null;
  function toast(msg){ if(!toastEl) return; toastEl.textContent=msg; toastEl.classList.add('show'); clearTimeout(toastTO);
                       toastTO=setTimeout(()=>toastEl.classList.remove('show'), 1800); }

  // Password gate
  const AUTH_KEY='cv_auth_ok_v1', auth=$('auth'), authInput=$('authInput'), authBtn=$('authBtn');
  function unlock(){
    if(authInput && authInput.value==='1234'){ safeLS.set(AUTH_KEY,'1'); auth.classList.add('hide'); sfx('ok'); toast('Unlocked'); }
    else { sfx('no'); toast('Wrong password'); if(authInput){ authInput.value=''; authInput.placeholder='Try again'; } }
  }
  if(auth && safeLS.get(AUTH_KEY)==='1') auth.classList.add('hide');
  if(authBtn) authBtn.addEventListener('click', unlock);
  if(authInput) authInput.addEventListener('keydown', e=>{ if(e.key==='Enter') unlock(); });

  // Theme toggle
  const root=document.documentElement, themeBtn=$('themeBtn');
  const saved=safeLS.get('theme2'); if(saved==='light') root.setAttribute('data-theme','light');
  if(themeBtn){ themeBtn.addEventListener('click', ()=>{
    const isLight=root.getAttribute('data-theme')==='light';
    if(isLight){ root.removeAttribute('data-theme'); safeLS.set('theme2','dark'); toast('Dark theme'); }
    else { root.setAttribute('data-theme','light'); safeLS.set('theme2','light'); toast('Light theme'); }
    sfx('click');
  });}

  // Background particles — denser & with twinkle
  const field=$('field'); if(field){
    const ctx=field.getContext('2d'); let w=0,h=0,parts=[];
    function size(){ w=field.width=innerWidth; h=field.height=Math.max(document.body.scrollHeight, innerHeight); }
    function make(){ parts=[]; const n=Math.max(260, Math.floor(innerWidth*innerHeight/6000));
      for(let i=0;i<n;i++){ parts.push({x:Math.random()*innerWidth,y:Math.random()*h,vx:(Math.random()-0.5)*.25,vy:(Math.random()-0.5)*.25,r:Math.random()*1.8+0.4,baseA:Math.random()*0.5+0.25,phase:Math.random()*6.28}); } }
    function draw(){ ctx.clearRect(0,0,w,h);
      for(const p of parts){
        p.x+=p.vx; p.y+=p.vy; p.phase+=0.02;
        if(p.x<0||p.x>w) p.vx*=-1; if(p.y<0||p.y>h) p.vy*=-1;
        const a = p.baseA + Math.sin(p.phase)*0.2; ctx.globalAlpha = a;
        ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fillStyle = 'rgba(180,210,255,1)'; ctx.fill();
      }
      ctx.globalAlpha=1; requestAnimationFrame(draw);
    }
    window.addEventListener('resize', ()=>{ size(); make(); });
    size(); make(); draw();
  }

  // Glow that sticks to the cursor (pixel coords, scroll aware)
  const glowDot=$('glowDot');
  const cursor=$('cursor');
  const isTouch=('ontouchstart' in window) || navigator.maxTouchPoints>0;
  function moveUX(e){
    if(glowDot){ const half=glowDot.offsetWidth/2; glowDot.style.transform=`translate(${e.clientX - half}px, ${e.clientY - half + window.scrollY}px)`; }
    if(cursor && !isTouch){ const half=cursor.offsetWidth/2; cursor.style.transform=`translate(${e.clientX-half}px, ${e.clientY-half}px)`; }
  }
  window.addEventListener('pointermove', moveUX, {passive:true});
  if(isTouch && cursor){ cursor.style.display='none'; }
  if(isTouch && glowDot){ glowDot.style.opacity=.35; }

  // Hover grow for interactive elements
  for (const el of document.querySelectorAll('.btn, a, summary, .skill, .envelope, #badge, #kitBtn')){
    el.addEventListener('pointerenter', ()=> cursor && cursor.classList.add('big'));
    el.addEventListener('pointerleave', ()=> cursor && cursor.classList.remove('big'));
  }

  // 3D tilt for cards
  for(const card of document.querySelectorAll('.card')){
    card.addEventListener('pointermove', (e)=>{
      const r=card.getBoundingClientRect();
      const x=(e.clientX-r.left)/r.width*2-1; const y=(e.clientY-r.top)/r.height*2-1;
      card.style.transform=`rotateY(${x*6}deg) rotateX(${-y*6}deg) translateY(-2px)`;
    });
    card.addEventListener('pointerleave', ()=> card.style.transform='');
  }

  // Scroll reveal
  const reveals=[...document.querySelectorAll('.reveal')];
  if('IntersectionObserver' in window){
    let lastY=window.scrollY, lastT=performance.now();
    const io=new IntersectionObserver((entries)=>{
      for(const e of entries){
        if(e.isIntersecting){
          const now=performance.now(); const dy=Math.abs(window.scrollY-lastY)+1; const dt=now-lastT+1;
          const speed=Math.min(1.2, Math.max(.4, dy/dt));
          e.target.classList.add('in');
          e.target.style.transition=`opacity ${0.7/speed}s ease, transform ${0.9/speed}s cubic-bezier(.2,.65,.2,1), filter ${0.9/speed}s`;
          io.unobserve(e.target);
        }
      }
    },{threshold:.15});
    reveals.forEach(el=>io.observe(el));
    window.addEventListener('scroll', ()=>{ lastT=performance.now(); lastY=window.scrollY; }, {passive:true});
  }else{ reveals.forEach(el=>el.classList.add('in')); }

  // Smooth anchors
  document.querySelectorAll('a[href^="#"]').forEach(a=>a.addEventListener('click', e=>{
    const id=a.getAttribute('href').slice(1); const t=document.getElementById(id);
    if(t){ e.preventDefault(); t.scrollIntoView({behavior:'smooth', block:'start'}); sfx('click'); }
  }));

  // Skills grid
  const skills=$('skills');
  if(skills){ skills.querySelectorAll('.skill').forEach((el)=>{ el.addEventListener('click', ()=>{ el.classList.toggle('active'); sfx('open'); }); }); }

  // Kit pill toggle (styled button)
  const kitBtn=$('kitBtn'), kitPanel=$('kitPanel');
  if(kitBtn && kitPanel){
    kitBtn.addEventListener('click', ()=>{
      const open = kitPanel.hasAttribute('hidden') ? false : true;
      if(open){ kitPanel.setAttribute('hidden',''); kitBtn.setAttribute('aria-expanded','false'); kitBtn.textContent='Show technical kit'; }
      else { kitPanel.removeAttribute('hidden'); kitBtn.setAttribute('aria-expanded','true'); kitBtn.textContent='Hide technical kit'; }
      sfx('open');
    });
  }

  // Contact envelope
  const env=$('env');
  if(env){ env.addEventListener('click', ()=>{
    env.classList.toggle('open'); sfx('open');
    if(env.classList.contains('open')) setTimeout(()=>{ location.href='mailto:archie_butler@icloud.com'; }, 600);
  });}

  // Badge easter egg: theme & confetti
  const badge=$('badge');
  if(badge){ badge.addEventListener('click', ()=>{
    const isLight=root.getAttribute('data-theme')==='light';
    if(isLight){ root.removeAttribute('data-theme'); safeLS.set('theme2','dark'); toast('Dark theme'); }
    else { root.setAttribute('data-theme','light'); safeLS.set('theme2','light'); toast('Light theme'); }
    confetti(); sfx('ok');
  });}

  // Konami confetti
  const seq=['ArrowUp','ArrowUp','ArrowDown','ArrowDown','ArrowLeft','ArrowRight','ArrowLeft','ArrowRight','b','a']; let idx=0;
  window.addEventListener('keydown', (e)=>{ if(e.key===seq[idx]){ idx++; if(idx===seq.length){ confetti(); sfx('ok'); toast('Konami!'); idx=0; } } else idx=0; });

  // Aurora easter egg: type "aurora" to toggle
  const auroraCanvas=$('aurora'); let auroraRAF=null, auroraActive=false;
  function auroraResize(){ if(!auroraCanvas) return; auroraCanvas.width=innerWidth; auroraCanvas.height=Math.max(document.body.scrollHeight, innerHeight); }
  function startAurora(){
    if(!auroraCanvas||auroraActive) return; auroraActive=true; auroraCanvas.style.opacity='1';
    const ax=auroraCanvas.getContext('2d'); let t=0; ax.globalCompositeOperation='lighter';
    (function loop(){
      if(!auroraActive) return; ax.clearRect(0,0,auroraCanvas.width, auroraCanvas.height);
      const bands=4;
      for(let i=0;i<bands;i++){
        const baseY=(innerHeight*0.25 + i*120) + window.scrollY*0.2;
        const amp=60+i*8, hue=130+i*30;
        ax.beginPath(); ax.moveTo(0, baseY);
        for(let x=0;x<=auroraCanvas.width;x+=20){
          const y=baseY + Math.sin((x*0.005)+t*0.02+i)*amp * Math.sin(t*0.004+i);
          ax.lineTo(x,y);
        }
        ax.lineTo(auroraCanvas.width, baseY+300); ax.lineTo(0, baseY+300); ax.closePath();
        const grad=ax.createLinearGradient(0, baseY-80, 0, baseY+180);
        grad.addColorStop(0, `hsla(${hue},90%,70%,.10)`);
        grad.addColorStop(0.5, `hsla(${hue+40},90%,70%,.18)`);
        grad.addColorStop(1, `hsla(${hue+80},90%,70%,0)`);
        ax.fillStyle=grad; ax.shadowBlur=60; ax.shadowColor=`hsla(${hue+20},90%,70%,.6)`; ax.fill();
      }
      t++; auroraRAF=requestAnimationFrame(loop);
    })();
    toast('Aurora ON (type "aurora" or Esc to exit)');
  }
  function stopAurora(){ if(!auroraCanvas) return; auroraActive=false; auroraCanvas.style.opacity='0'; if(auroraRAF) cancelAnimationFrame(auroraRAF);
    const ax=auroraCanvas.getContext('2d'); ax.clearRect(0,0,auroraCanvas.width, auroraCanvas.height); toast('Aurora OFF'); }
  auroraResize(); window.addEventListener('resize', auroraResize);
  window.addEventListener('scroll', ()=>{ if(auroraActive) auroraResize(); }, {passive:true});
  let keyBuffer=''; window.addEventListener('keydown', (e)=>{
    if(e.target && (e.target.tagName==='INPUT' || e.target.tagName==='TEXTAREA' || e.target.isContentEditable)) return;
    const ch=e.key.length===1 ? e.key.toLowerCase() : ''; if(ch){ keyBuffer=(keyBuffer+ch).slice(-12); }
    if(keyBuffer.includes('aurora')){ if(auroraActive) stopAurora(); else startAurora(); keyBuffer=''; }
    if(e.key==='Escape' && auroraActive){ stopAurora(); }
  });

  // SFX
  let actx=null;
  function sfx(type){
    if(matchMedia('(prefers-reduced-motion: reduce)').matches) return;
    try{
      actx = actx || new (window.AudioContext||window.webkitAudioContext)();
      const o=actx.createOscillator(), g=actx.createGain(); o.connect(g); g.connect(actx.destination);
      const now=actx.currentTime;
      if(type==='click'){ o.frequency.value=280; }
      else if(type==='open'){ o.frequency.setValueAtTime(420,now); o.frequency.linearRampToValueAtTime(660, now+.2); }
      else if(type==='ok'){ o.frequency.setValueAtTime(500,now); o.frequency.linearRampToValueAtTime(900, now+.15); }
      else { o.frequency.value=200; }
      g.gain.value=.08; g.gain.exponentialRampToValueAtTime(0.0001, now+.22); o.start(); o.stop(now+.25);
    }catch(err){}
  }
  window.sfx = sfx;

  // Confetti
  function confetti(){
    const cvs=document.createElement('canvas'); cvs.style.position='fixed'; cvs.style.inset=0; cvs.style.pointerEvents='none';
    cvs.width=innerWidth; cvs.height=innerHeight; document.body.appendChild(cvs);
    const cx=cvs.getContext('2d');
    const pieces=Array.from({length:120},()=>({x:Math.random()*cvs.width,y:-20*Math.random(),vx:(Math.random()-.5)*2,vy:Math.random()*2+2,sz:Math.random()*6+4,col:`hsl(${Math.random()*360},80%,60%)`,rot:Math.random()*6}));
    let t=0; (function anim(){ cx.clearRect(0,0,cvs.width,cvs.height);
      for(const p of pieces){ p.x+=p.vx; p.y+=p.vy; p.rot+=.1; if(p.y>cvs.height+20) p.y=-20;
        cx.save(); cx.translate(p.x,p.y); cx.rotate(p.rot); cx.fillStyle=p.col; cx.fillRect(-p.sz/2,-p.sz/2,p.sz,p.sz); cx.restore();
      }
      t++; if(t<400) requestAnimationFrame(anim); else cvs.remove();
    })();
  }
  window.confetti = confetti;
})();</script>
</body>
</html>
